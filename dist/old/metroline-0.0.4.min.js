!function(){this.Metroline=function(){function i(){a.css("top",h*$(window).scrollTop()),e()}function o(i){if(v){var o=i.clientY-p;0!=o&&$(window).scrollTop(u*(m+o))}}function t(i){v=!0,p=i.clientY,m=a.position().top,c.addClass("unselectable")}function n(){v=!1,c.removeClass("unselectable")}function s(){var i=r*$(this).position().top/d+f;C.append('<li style="top: '+i+'px"><a href="#'+$(this).attr("id")+'">'+$(this).data("title")+"</a></li>")}function e(){C.find("li").each(l)}function l(){var i=$(this).position().top,o=h*$(window).scrollTop();o+w>i&&i>o?$(this).addClass("active"):$(this).removeClass("active")}var a=$("#scrollcursor"),c=$("body"),d=Math.max($(document).height(),$(window).height()),r=window.innerHeight,h=r/d,u=d/r,w=h*r,f=w/2;a.css("height",w),$(window).scroll(i);var p,v=!1,m=0;a.mousedown(t),$(window).mousemove(o),$(window).mouseup(n);var C=$("#scrolllinks");C.find("li").remove(),$("section").each(s),C.find("li:first").addClass("active")}}();
